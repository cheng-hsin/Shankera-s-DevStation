---
title: 'OpenSearch çš„ Index Template vs Index Patternï¼šåˆå­¸è€…æ˜“è¸©åˆ°çš„å‘'
date: '2025-08-30'
lastmod: '2025-08-30'
tags: ['opensearch', 'index template', 'index pattern']
draft: false
summary: 'å¾ˆå¤šåˆå­¸è€…åœ¨ä½¿ç”¨ OpenSearch æ™‚ï¼ŒæœƒæŠŠ Index Template å’Œ Index Pattern ææ··ï¼Œæœ¬æ–‡å°‡é‡æ¸…å…©è€…çš„å·®ç•°èˆ‡ä½¿ç”¨æƒ…å¢ƒã€‚'
layout: PostSimple
bibliography: references-data.bib
canonicalUrl: https://tailwind-nextjs-starter-blog.vercel.app/blog/new-features-in-v1/
---

æœ€è¿‘åœ¨è¨­å®š FireLens æŠŠ ECS container log å¯«é€² OpenSearch æ™‚ï¼Œé‡åˆ°ä¸€å€‹ç‹€æ³è®“æˆ‘å¡äº†å¥½ä¹…ï¼š**index æ˜æ˜æœ‰äº†ã€template ä¹Ÿè¨­äº†ï¼Œä½†åœ¨ OpenSearch Dashboards çš„ Discover å»æ€éº¼æ¨£éƒ½çœ‹ä¸åˆ°è³‡æ–™ã€‚**

å¾Œä¾†ä»”ç´°ç ”ç©¶æ‰ç†è§£ï¼Œé€™æ•´å€‹æµç¨‹è£¡æœ‰ä¸€å€‹é—œéµå·®ç•°æ˜¯ï¼š

ğŸ‘‰ **Index Template è·Ÿ Index Pattern æ˜¯å®Œå…¨ä¸ä¸€æ¨£çš„æ±è¥¿ï¼**

---

### ğŸ”§ Index Template æ˜¯çµ¦ OpenSearch æœ¬èº«ç”¨çš„

ç•¶æˆ‘è¨­å®š FireLens çš„ logConfigurationï¼ŒæŒ‡å®š log è¦å¯«å…¥åƒ `chainss-bitgo-mgmt-task-%Y-%m` é€™æ¨£çš„ index æ™‚ï¼Œæˆ‘ä»¥ç‚ºåªè¦å»ºç«‹å¥½å°æ‡‰çš„ `index template` å°±æœƒè‡ªå‹•å‡ºç¾åœ¨ Dashboardsã€‚

ä½†äº‹å¯¦ä¸Šï¼š

- **Index Template çš„ä½œç”¨æ˜¯ï¼šç•¶ OpenSearch æ¥æ”¶åˆ°æ–°çš„å¯«å…¥è«‹æ±‚æ™‚ï¼Œè©² template å°±æœƒè¢«å¥—ç”¨åˆ°é€™å€‹æ–° index**
- ä¾‹å¦‚ï¼šä½ å¯ä»¥å®šç¾© `@timestamp` æ˜¯ `date` é¡å‹ï¼Œæˆ– index æœ‰å¹¾å€‹ shards
- å®ƒæ˜¯å¯«çµ¦ OpenSearch ç³»çµ±è‡ªå·±çœ‹çš„ï¼Œè·Ÿ Dashboards ç„¡é—œ

---

### ğŸ‘€ Index Pattern æ‰æ˜¯ Dashboards èƒ½çœ‹åˆ°çš„

æˆ‘åœ¨ Discover é é¢ä¸€ç›´çœ‹ä¸åˆ° logï¼Œé‚„ä»¥ç‚ºè³‡æ–™æ²’é€²ä¾†ï¼Œçµæœï¼š

- ç™¼ç¾å…¶å¯¦ index `chainss-bitgo-mgmt-task-2025-07` å·²ç¶“è¢«æ­£ç¢ºå»ºç«‹
- `GET _cat/indices` ä¹ŸæŸ¥å¾—åˆ°ï¼Œlog éƒ½åœ¨é‚£é‚Š
- å•é¡Œå‡ºåœ¨æˆ‘æ ¹æœ¬æ²’å»ºç«‹å°æ‡‰çš„ **Index Pattern**

å¾Œä¾†æ‰çŸ¥é“ï¼š

> ğŸ” **Index Pattern æ˜¯ Dashboards UI æŸ¥è³‡æ–™çš„é—œéµï¼Œå®ƒä¸æœƒè‡ªå‹•å¹«ä½ å»ºç«‹ï¼**

ä½ å¿…é ˆé€²åˆ° Dashboard Management â†’ Data Views è£¡ï¼Œæ‰‹å‹•å»ºç«‹ï¼š

- åç¨±ï¼š`chainss-bitgo-mgmt-task-*`
- æ™‚é–“æ¬„ä½ï¼šé¸ `@timestamp`

é€™æ¨£ Discover æ‰çŸ¥é“å»å“ªå€‹ index æ‰¾ logã€‚

---

![image](/static/images/2025-08-30_opensearch_tamplates/1.png)

### ğŸ’¥ åˆå­¸è€…æœ€å¸¸é‡åˆ°çš„å‘

1. **Template å»ºäº†ï¼Œä½†æ²’æœ‰å°æ‡‰ Pattern â†’ Discover çœ‹ä¸åˆ°è³‡æ–™**
2. **Index Pattern æ²’é¸å°æ™‚é–“æ¬„ä½ â†’ æŸ¥ä¸åˆ° log**
3. **æ™‚é–“ç¯„åœé¸å¤ªçŸ­ï¼ˆä¾‹å¦‚ Last 15 minutesï¼‰â†’ æ˜æ˜è³‡æ–™é€²ä¾†äº†å»çœ‹ä¸åˆ°**
4. **template çš„ priority æ²’è¨­å¥½ï¼Œå°è‡´è·Ÿ default-template è¡çªï¼Œç„¡æ³•å¥—ç”¨æƒ³è¦çš„ mapping**
5. **æ··æ·† template vs patternï¼Œèª¤ä»¥ç‚ºè¨­äº† templateï¼ŒDashboards å°±æœƒè‡ªå‹•æœ‰ pattern**

---

### ğŸ› ï¸ å»ºè­°åšæ³•ï¼ˆè¸©å®Œå‘ä¹‹å¾Œï¼‰

- **Always å»ºç«‹ Index Template**ï¼šè®“æœªä¾† index æœ‰æ­£ç¢ºè¨­å®š
- **è¨˜å¾—é€² Dashboards å»º Data Viewï¼ˆIndex Patternï¼‰**ï¼šå°¤å…¶è¦é¸ `@timestamp`
- **ç¢ºèªæ™‚é–“æ¬„ä½æœ‰è¢«å¯«å…¥**ï¼Œä¸ç„¶æœƒç„¡æ³•å¥—æ™‚é–“ç¯©é¸
- **template çš„ priority è¦é«˜æ–¼ default-template**ï¼ˆä¸ç„¶æœƒè¢«åƒæ‰ï¼‰

---

### âœ… å°çµï¼šå®ƒå€‘çœŸçš„å®Œå…¨ä¸ä¸€æ¨£

| åŠŸèƒ½                        | Index Template                          | Index Pattern (Data View)        |
| --------------------------- | --------------------------------------- | -------------------------------- |
| èª°ç”¨çš„ï¼Ÿ                    | OpenSearch ç³»çµ±                         | OpenSearch Dashboards ä½¿ç”¨è€…     |
| ç”¨é€”                        | æ§åˆ¶æ–° index å»ºç«‹æ™‚çš„è¨­å®šèˆ‡ mapping     | è®“ Dashboards èƒ½æŸ¥è©¢å°æ‡‰çš„ index |
| è‡ªå‹•å»ºç«‹ï¼Ÿ                  | ä¸æœƒå¥—ç”¨ patternï¼Œä¹Ÿä¸æœƒå‡ºç¾åœ¨ Discover | è¦æ‰‹å‹•å»ºç«‹                       |
| è·Ÿ log èƒ½ä¸èƒ½å¯«é€²ä¾†æœ‰é—œå—ï¼Ÿ | æœ‰ï¼ˆmapping ä¸æ­£ç¢ºå¯èƒ½å¯«ä¸é€²ä¾†ï¼‰        | æ²’æœ‰ï¼ˆåªæ˜¯åœ¨ Dashboard æ‰¾ä¸åˆ°ï¼‰  |

---

å¸Œæœ›é€™ç¯‡èƒ½å¹«åŠ©åƒæˆ‘ä¸€æ¨£åˆæ¬¡æ¥è§¸ OpenSearch çš„æœ‹å‹å°‘è¸©ä¸€é»å‘ ğŸ°
