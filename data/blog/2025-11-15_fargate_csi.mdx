---
title: 'æ¯æ¬¡å• AI éƒ½èªª Fargate ä¸æ”¯æ´å·ï¼Œå…¶å¯¦åªè¦ CSI å¾®èª¿å°±å¥½'
date: '2025-11-15'
lastmod: '2025-11-15'
tags: ['kubernetes', 'fargate', 'efs', 'csi']
draft: false
summary: 'EKS Fargate ç’°å¢ƒä¸‹ï¼ŒPVC ç¶å®šå¤±æ•—ä¸æ˜¯å› ç‚ºä¸æ”¯æ´å·ï¼Œè€Œæ˜¯ CSI Driver éœ€è¦å¾®èª¿ã€‚'
layout: PostSimple
bibliography: references-data.bib
canonicalUrl: https://tailwind-nextjs-starter-blog.vercel.app/blog/new-features-in-v1/
---

æœ€è¿‘åœ¨ç”¨ **EKS Fargate + Vault + EFS CSI Driver**ï¼Œé‡åˆ°ä¸€å€‹è¶…ç…©çš„éŒ¯èª¤ã€‚
éƒ¨ç½² Vault å¾Œï¼ŒPod ä¸€ç›´å¡åœ¨ `Pending`ï¼Œçœ‹ Eventsï¼š

```
Events:
  Type     Reason            Age   From               Message
  ----     ------            ----  ----               -------
  Warning  FailedScheduling  10m   fargate-scheduler  Pod not supported on Fargate: volumes not supported: data not supported because: PVC data-vault-0 not bound
```

æˆ‘å• AIï¼ˆChatGPT ç­‰ï¼‰ï¼Œå®ƒä¸€è‡´å›ç­”ï¼š

> â€œè¿™ä¸ªé”™è¯¯è¡¨æ˜æ‚¨çš„ Kubernetes Pod å°è¯•ä½¿ç”¨ AWS Fargate ä¸æ”¯æŒçš„å·ç±»å‹ã€‚
> Fargate å¯¹å¯ä»¥ä½¿ç”¨çš„å·ç±»å‹æœ‰é™åˆ¶ã€‚â€

è½èµ·ä¾†å¾ˆåˆç†ï¼Œä½†å…¶å¯¦ **å•é¡Œæ ¸å¿ƒä¸åœ¨ä¸èƒ½ç”¨ Fargate**ã€‚

---

## çœŸæ­£åŸå›  ğŸ’¡

PVC ç„¡æ³•ç¶å®šï¼Œä¸»è¦æ˜¯ **EFS CSI Driver çš„ä¸€äº›é¸é …éœ€è¦å¾®èª¿**ã€‚
Fargate ç’°å¢ƒä¸‹ï¼Œå¦‚æœä¿æŒä¸€äº›é è¨­è¨­å®šï¼ˆä¾‹å¦‚ node driver registrarã€node component ç­‰ï¼‰ï¼Œ
PVC å°±å¯èƒ½å¡åœ¨ `Pending`ï¼ŒPod ç„¡æ³•å•Ÿå‹•ã€‚

---

## å¾®èª¿å°±è§£æ±º âœ…

åªè¦é‡æ–°éƒ¨ç½² CSI Driverï¼Œ**æŠŠ node ç›¸é—œé¸é …è¨­æˆ false**ï¼Œå°±å¯ä»¥è§£æ±ºï¼š

```bash
helm upgrade --install aws-efs-csi-driver aws-efs-csi-driver/aws-efs-csi-driver \
  --namespace kube-system \
  --set controller.replicas=2 \
  --set node.enabled=false \
  --set sidecars.nodeDriverRegistrar.enabled=false \
  --set controller.securityContext.privileged=false \
  --set controller.containerSecurityContext.privileged=false \
  --set serviceAccount.create=true \
  --set serviceAccount.name=efs-csi-controller-sa \
  --set serviceAccount.annotations."eks\.amazonaws\.com/role-arn"="arn:aws:iam::XXXX:role/AmazonEKS_EFS_CSI_DriverRole_taiwan"
```

- ä¸ç”¨å¤§æ”¹è¨­å®šï¼Œä¹Ÿä¸ç”¨é‡å»º StorageClassã€‚
- PVC ç«‹åˆ»ç¶å®šæˆåŠŸï¼ŒVault Pods å…¨éƒ¨å•Ÿå‹• ğŸš€

---

## å°çµ ğŸ“˜

AI æ¯æ¬¡éƒ½èªª Fargate ä¸æ”¯æ´å·ï¼Œå…¶å¯¦åªæ˜¯ **å¾®èª¿ CSI Driver å°±èƒ½è§£æ±ºå•é¡Œ**ã€‚
æé†’å¤§å®¶ï¼š

- âŒ ä¸è¦ä¸€è½éŒ¯èª¤è¨Šæ¯å°±ä»¥ç‚ºçœŸçš„ä¸èƒ½ç”¨ Fargate
- âœ… ä»”ç´°åˆ†æå¯¦éš›åŸå› ï¼Œå¾€å¾€åªéœ€å¾®èª¿å³å¯
